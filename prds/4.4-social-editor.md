# PRD 4.4 — Social Editor: Thread Builder and Multi-Sync

**Phase:** 4 — Growth and Engagement
**Type:** EXPAND
**Complexity:** High
**Dependencies:** Task 2.5 (SocialMedia fixes)

---

## Goal

Transform the read-and-copy social output into a full editing suite where users can build threads, remix content per platform, and eventually cross-post directly.

---

## Target User

Newsletter author who wants to promote their newsletter across social platforms and treats social as a distribution channel, not an afterthought.

---

## Success Metrics

- Social post edit rate > 50% (users customize generated posts instead of using them as-is)
- Thread builder usage for Twitter/Threads > 30%
- AI remix usage > 20% of social sessions

---

## Features

### 1. Thread Builder (Twitter / Threads)
For Twitter and Threads platforms:
- List of tweet/post cards, one textarea per item
- "Add post" button at the bottom
- Drag handle per card for reordering
- Delete button per card
- Per-card character count with over-limit warning (280 chars for Twitter)
- Thread numbering display (1/5, 2/5, etc.)

### 2. AI Remix
Per-platform "Remix for [Platform]" button:
- Calls `remix-social-post` edge function
- Reformats content for target platform conventions (hashtags, length, tone)
- Shows loading state, then replaces current content
- Confirmation prompt before overwriting edits

### 3. Multi-Sync
Platform checkboxes + "Post to all selected" button:
- Enabled in this release with direct API integrations (v2)
- UI ships now with "Coming soon" on the post button
- Platform connection management (connect Twitter, LinkedIn, etc.) in Settings

### 4. Visual Focus
Per-platform attachment area:
- Image/video upload zone
- Dimension guide text per platform (Twitter: 1200×675px, Instagram: 1080×1080px, etc.)
- Preview thumbnail once uploaded

### 5. Persistence
- All edited posts saved to `social_posts` database table
- Load saved posts on page revisit instead of auto-generating
- "Regenerate" button with confirmation dialog to replace saved posts

---

## Data Model

```sql
CREATE TABLE social_posts (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  newsletter_id UUID REFERENCES newsletters(id) ON DELETE CASCADE,
  tenant_id UUID REFERENCES tenants(id) ON DELETE CASCADE,
  platform TEXT NOT NULL,
  content_json JSONB NOT NULL,
  status TEXT DEFAULT 'draft',
  posted_at TIMESTAMPTZ,
  external_post_id TEXT,
  created_at TIMESTAMPTZ DEFAULT now(),
  updated_at TIMESTAMPTZ DEFAULT now()
);
```

`content_json` schema per platform:
- Twitter/Threads: `{ "tweets": [{ "text": "...", "media_urls": [] }] }`
- LinkedIn/Facebook: `{ "post": "...", "media_urls": [] }`
- Instagram: `{ "caption": "...", "media_urls": [] }`

---

## Edge Function: `remix-social-post`

**Input:** `{ content, source_platform, target_platform }`
**Output:** `{ remixed_content }`

Rewrites `content` optimized for `target_platform` format and conventions.

---

## Out of Scope

- Direct API posting to platforms (v2 — requires OAuth per platform)
- Analytics per social post (impressions, likes, shares)
- Scheduling social posts independently of newsletters

---

## Implementation Subtasks

- [ ] 4.4.1: Create DB migration: `social_posts` table
- [ ] 4.4.2: Add shared type: `SocialPost` in `packages/shared`
- [ ] 4.4.3: Build thread builder component for Twitter/Threads
- [ ] 4.4.4: Create edge function `remix-social-post`
- [ ] 4.4.5: Build AI Remix button per platform tab
- [ ] 4.4.6: Build persistence layer — save all posts to `social_posts` on edit
- [ ] 4.4.7: Load saved posts on page visit instead of auto-generating
- [ ] 4.4.8: Build image/video attachment area per platform with dimension guide text
- [ ] 4.4.9: Build multi-sync UI — checkboxes per platform, disabled "Post to all selected" with tooltip
- [ ] 4.4.10: Add `api.ts` wrappers: `saveSocialPosts()`, `remixSocialPost()`, `getSocialPosts()`
- [ ] 4.4.11: Add toast notifications for save/remix operations

---

## Stitch Design References

`social_editor:_ai_remix_v1`, `social_editor:_multi-sync_v2`, `social_editor:_thread_builder_v4_*`, `social_editor:_visual_focus_v3`
